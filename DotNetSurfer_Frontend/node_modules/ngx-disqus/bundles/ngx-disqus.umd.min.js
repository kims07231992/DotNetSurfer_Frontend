!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-disqus",["exports","@angular/core","@angular/common"],t):t(e["ngx-disqus"]={},e.ng.core,e.ng.common)}(this,function(e,r,n){"use strict";var i=new r.InjectionToken("SHORTNAME"),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var s=new r.InjectionToken("WindowToken"),t=function(){function e(){}return Object.defineProperty(e.prototype,"nativeWindow",{get:function(){throw new Error("Not implemented.")},enumerable:!0,configurable:!0}),e}(),u=function(e){function t(){return e.call(this)||this}return function n(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t.prototype,"nativeWindow",{get:function(){return window},enumerable:!0,configurable:!0}),t}(t);function a(e,t){return n.isPlatformBrowser(t)?e.nativeWindow:new Object}var c={provide:t,useClass:u},p={provide:s,useFactory:a,deps:[t,r.PLATFORM_ID]},d=[c,p],f=function(){function e(e,t){this.shortname=e,this._window=t}return Object.defineProperty(e.prototype,"DISQUS",{get:function(){return this._window.DISQUS},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disqus_config",{get:function(){return this._window.disqus_config},set:function(e){this._window.disqus_config=e},enumerable:!0,configurable:!0}),e.decorators=[{type:r.Injectable}],e.ctorParameters=function(){return[{type:String,decorators:[{type:r.Inject,args:[i]}]},{type:undefined,decorators:[{type:r.Inject,args:[s]}]}]},e}(),g=function(){function e(e,t,n){this.renderer=e,this.el=t,this.dService=n,this.newComment=new r.EventEmitter(!0),this.ready=new r.EventEmitter(!0),this.paginate=new r.EventEmitter(!0)}return e.prototype.ngOnChanges=function(){this.dService.DISQUS?this.reset():this.addDisqusScript()},e.prototype.addDisqusScript=function(){this.dService.disqus_config=this.getConfig();var e=this.renderer.createElement("script");e.src="//"+this.dService.shortname+".disqus.com/embed.js",e.async=!0,e.type="text/javascript",this.renderer.setAttribute(e,"data-timestamp",(new Date).getTime().toString()),this.renderer.appendChild(this.el.nativeElement,e)},e.prototype.reset=function(){this.dService.DISQUS.reset({reload:!0,config:this.getConfig()})},e.prototype.getConfig=function(){var t=this;return function(){this.page.identifier=t.identifier,this.page.url=t.validateUrl(t.url),this.page.title=t.title,this.category_id=t.category,this.language=t.language,this.callbacks.onNewComment=[function(e){t.newComment.emit(e)}],this.callbacks.onReady=[function(e){t.ready.emit(e)}],this.callbacks.onPaginate=[function(e){t.paginate.emit(e)}]}},e.prototype.validateUrl=function(e){if(e){if(/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e))return e;console.warn("[Disqus]: Invalid URL, return undefined")}return undefined},e.decorators=[{type:r.Component,args:[{selector:"disqus",template:'<div id="disqus_thread"></div>',changeDetection:r.ChangeDetectionStrategy.OnPush}]}],e.ctorParameters=function(){return[{type:r.Renderer2},{type:r.ElementRef},{type:f}]},e.propDecorators={url:[{type:r.Input}],identifier:[{type:r.Input}],title:[{type:r.Input}],category:[{type:r.Input}],language:[{type:r.Input}],newComment:[{type:r.Output}],ready:[{type:r.Output}],paginate:[{type:r.Output}]},e}();function l(e,t){return new f(e,t)}var y=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[d,{provide:i,useValue:e},{provide:f,useFactory:l,deps:[i,s]}]}},t.decorators=[{type:r.NgModule,args:[{declarations:[g],exports:[g]}]}],t}();e.DisqusModule=y,e.DisqusService=f,e.ɵb=g,e.ɵa=l,e.ɵc=i,e.ɵf=u,e.ɵd=s,e.ɵj=d,e.ɵe=t,e.ɵh=c,e.ɵg=a,e.ɵi=p,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-disqus.umd.min.js.map